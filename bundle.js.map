{"version":3,"file":"bundle.js","sources":["node_modules/hyperapp/src/h.js","node_modules/hyperapp/src/app.js","node_modules/unfetch/dist/unfetch.es.js","index.js"],"sourcesContent":["export function h(tag, data) {\n  var node\n  var stack = []\n  var children = []\n\n  for (var i = arguments.length; i-- > 2; ) {\n    stack[stack.length] = arguments[i]\n  }\n\n  while (stack.length) {\n    if (Array.isArray((node = stack.pop()))) {\n      for (var i = node.length; i--; ) {\n        stack[stack.length] = node[i]\n      }\n    } else if (node != null && node !== true && node !== false) {\n      if (typeof node === \"number\") {\n        node = node + \"\"\n      }\n      children[children.length] = node\n    }\n  }\n\n  return typeof tag === \"string\"\n    ? {\n        tag: tag,\n        data: data || {},\n        children: children\n      }\n    : tag(data, children)\n}\n","export function app(app) {\n  var state = {}\n  var actions = {}\n  var events = {}\n  var mixins = []\n  var view = app.view\n  var root = app.root || document.body\n  var node\n  var element\n  var locked = false\n  var loaded = false\n\n  for (var i = -1; i < mixins.length; i++) {\n    var mixin = mixins[i] ? mixins[i](emit) : app\n\n    Object.keys(mixin.events || []).map(function(key) {\n      events[key] = (events[key] || []).concat(mixin.events[key])\n    })\n\n    if (mixin.state != null) {\n      state = merge(state, mixin.state)\n    }\n\n    mixins = mixins.concat(mixin.mixins || [])\n\n    initialize(actions, mixin.actions)\n  }\n\n  node = hydrate((element = root.querySelector(\"[data-ssr]\")), [].map)\n\n  repaint(emit(\"init\"))\n\n  return emit\n\n  function repaint() {\n    if (!locked) {\n      requestAnimationFrame(render, (locked = !locked))\n    }\n  }\n\n  function hydrate(element, map) {\n    return element == null\n      ? element\n      : {\n          tag: element.tagName,\n          data: {},\n          children: map.call(element.childNodes, function(element) {\n            hydrate(element, map)\n          })\n        }\n  }\n\n  function render() {\n    element = patch(\n      root,\n      element,\n      node,\n      (node = emit(\"render\", view)(state, actions))\n    )\n\n    locked = !locked\n\n    if (!loaded) {\n      emit(\"loaded\", (loaded = true))\n    }\n  }\n\n  function initialize(namespace, children, lastName) {\n    Object.keys(children || []).map(function(key) {\n      var action = children[key]\n      var name = lastName ? lastName + \".\" + key : key\n\n      if (typeof action === \"function\") {\n        namespace[key] = function(data) {\n          var result = action(\n            state,\n            actions,\n            emit(\"action\", {\n              name: name,\n              data: data\n            }).data\n          )\n\n          if (result != null && result.then == null) {\n            repaint((state = merge(state, emit(\"update\", result))))\n          }\n\n          return result\n        }\n      } else {\n        initialize(namespace[key] || (namespace[key] = {}), action, name)\n      }\n    })\n  }\n\n  function emit(name, data) {\n    return (events[name] || []).map(function(cb) {\n      var result = cb(state, actions, data)\n      if (result != null) {\n        data = result\n      }\n    }), data\n  }\n\n  function merge(a, b) {\n    if (typeof b !== \"object\") {\n      return b\n    }\n\n    var obj = {}\n\n    for (var i in a) {\n      obj[i] = a[i]\n    }\n\n    for (var i in b) {\n      obj[i] = b[i]\n    }\n\n    return obj\n  }\n\n  function getKey(node) {\n    if (node && (node = node.data)) {\n      return node.key\n    }\n  }\n\n  function createElement(node, isSVG) {\n    if (typeof node === \"string\") {\n      var element = document.createTextNode(node)\n    } else {\n      var element = (isSVG = isSVG || node.tag === \"svg\")\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n        : document.createElement(node.tag)\n\n      for (var i = 0; i < node.children.length; ) {\n        element.appendChild(createElement(node.children[i++], isSVG))\n      }\n\n      for (var i in node.data) {\n        if (i === \"oncreate\") {\n          node.data[i](element)\n        } else if (i === \"oninsert\") {\n          setTimeout(node.data[i], 0, element)\n        } else {\n          setElementData(element, i, node.data[i])\n        }\n      }\n    }\n\n    return element\n  }\n\n  function setElementData(element, name, value, oldValue) {\n    if (\n      name === \"key\" ||\n      name === \"oncreate\" ||\n      name === \"oninsert\" ||\n      name === \"onupdate\" ||\n      name === \"onremove\"\n    ) {\n      return name\n    } else if (name === \"style\") {\n      for (var i in merge(oldValue, (value = value || {}))) {\n        element.style[i] = value[i] || \"\"\n      }\n    } else {\n      try {\n        element[name] = value\n      } catch (_) {}\n\n      if (typeof value !== \"function\") {\n        if (value) {\n          element.setAttribute(name, value)\n        } else {\n          element.removeAttribute(name)\n        }\n      }\n    }\n  }\n\n  function updateElementData(element, oldData, data, cb) {\n    for (var name in merge(oldData, data)) {\n      var value = data[name]\n      var oldValue = oldData[name]\n\n      if (\n        value !== oldValue &&\n        value !== element[name] &&\n        setElementData(element, name, value, oldValue) == null\n      ) {\n        cb = data.onupdate\n      }\n    }\n\n    if (cb != null) {\n      cb(element)\n    }\n  }\n\n  function removeElement(parent, element, data) {\n    if (data && data.onremove) {\n      data.onremove(element)\n    } else {\n      parent.removeChild(element)\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, lastElement) {\n    if (oldNode == null) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.tag != null && node.tag === oldNode.tag) {\n      updateElementData(element, oldNode.data, node.data)\n\n      isSVG = isSVG || node.tag === \"svg\"\n\n      var len = node.children.length\n      var oldLen = oldNode.children.length\n      var reusableChildren = {}\n      var oldElements = []\n      var newKeys = {}\n\n      for (var i = 0; i < oldLen; i++) {\n        var oldElement = element.childNodes[i]\n        oldElements[i] = oldElement\n\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          reusableChildren[oldKey] = [oldElement, oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < len) {\n        var oldElement = oldElements[i]\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        if (newKeys[oldKey]) {\n          i++\n          continue\n        }\n\n        var newKey = getKey(newChild)\n\n        var reusableChild = reusableChildren[newKey] || []\n\n        if (null == newKey) {\n          if (null == oldKey) {\n            patch(element, oldElement, oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          if (oldKey === newKey) {\n            patch(element, reusableChild[0], reusableChild[1], newChild, isSVG)\n            i++\n          } else if (reusableChild[0]) {\n            element.insertBefore(reusableChild[0], oldElement)\n            patch(element, reusableChild[0], reusableChild[1], newChild, isSVG)\n          } else {\n            patch(element, oldElement, null, newChild, isSVG)\n          }\n\n          j++\n          newKeys[newKey] = newChild\n        }\n      }\n\n      while (i < oldLen) {\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n        if (null == oldKey) {\n          removeElement(element, oldElements[i], oldChild.data)\n        }\n        i++\n      }\n\n      for (var i in reusableChildren) {\n        var reusableChild = reusableChildren[i]\n        var reusableNode = reusableChild[1]\n        if (!newKeys[reusableNode.data.key]) {\n          removeElement(element, reusableChild[0], reusableNode.data)\n        }\n      }\n    } else if (\n      (lastElement = element) != null &&\n      node !== oldNode &&\n      node !== element.nodeValue\n    ) {\n      parent.replaceChild((element = createElement(node, isSVG)), lastElement)\n    }\n\n    return element\n  }\n}\n","var index = typeof fetch=='function' ? fetch.bind() : function(url, options) {\n\toptions = options || {};\n\treturn new Promise( function (resolve, reject) {\n\t\tvar request = new XMLHttpRequest();\n\n\t\trequest.open(options.method || 'get', url);\n\n\t\tfor (var i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.withCredentials = options.credentials=='include';\n\n\t\trequest.onload = function () {\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.send(options.body);\n\n\t\tfunction response() {\n\t\t\tvar keys = [],\n\t\t\t\tall = [],\n\t\t\t\theaders = {},\n\t\t\t\theader;\n\n\t\t\trequest.getAllResponseHeaders().replace(/^(.*?):\\s*([\\s\\S]*?)$/gm, function (m, key, value) {\n\t\t\t\tkeys.push(key = key.toLowerCase());\n\t\t\t\tall.push([key, value]);\n\t\t\t\theader = headers[key];\n\t\t\t\theaders[key] = header ? (header + \",\" + value) : value;\n\t\t\t});\n\n\t\t\treturn {\n\t\t\t\tok: (request.status/200|0) == 1,\t\t// 200-299\n\t\t\t\tstatus: request.status,\n\t\t\t\tstatusText: request.statusText,\n\t\t\t\turl: request.responseURL,\n\t\t\t\tclone: response,\n\t\t\t\ttext: function () { return Promise.resolve(request.responseText); },\n\t\t\t\tjson: function () { return Promise.resolve(request.responseText).then(JSON.parse); },\n\t\t\t\tblob: function () { return Promise.resolve(new Blob([request.response])); },\n\t\t\t\theaders: {\n\t\t\t\t\tkeys: function () { return keys; },\n\t\t\t\t\tentries: function () { return all; },\n\t\t\t\t\tget: function (n) { return headers[n.toLowerCase()]; },\n\t\t\t\t\thas: function (n) { return n.toLowerCase() in headers; }\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t});\n};\n\nexport default index;\n//# sourceMappingURL=unfetch.es.js.map\n","import { h, app } from 'hyperapp'\nimport fetch from 'unfetch'\n\nconst Selection = ({ state, actions }) => {\n    let name = state.selectedAircraft ? state.selectedAircraft.name : ''\n    return (\n        <section class=\"aircraftList\">\n            <h1>Aircraft</h1>\n            <ul>\n            { state.aircraft.map(aircraft =>\n                <li><a onclick={ _ => actions.chooseAircraft(aircraft.name) }>{ aircraft.name }</a></li>\n            )}\n            </ul>\n        </section>\n    )\n}\n\nconst CloseButton = ({ actions }) => (<a class='closeButton' onclick={ _ => actions.chooseAircraft() }>&#x2715;</a>)\n\nconst Main = ({ state, actions }) => {\n    if (state.selectedAircraft != null) {\n        return (\n            <main>\n                <CloseButton actions={ actions } />\n                <h1>{ state.selectedAircraft.name }</h1>\n                <object type=\"image/svg+xml\" id=\"svg\" data={ `aircraft/${state.selectedAircraft.image}` }/>\n\n                { state.selectedAircraft.procedures.concat(state.selectedAircraft.systems).map((item, index) => (\n                    <Transition delay={ index * 0.15 }>\n                        <List list={ item } />\n                    </Transition>\n                ))}\n\n                <a class=\"bvr\" href=\"https://bvr.design\"><img src=\"./bvr.png\"/></a>\n            </main>\n        )\n    } else {\n        return (\n            <main>\n                <Selection state={ state } actions={ actions }/>\n\n                <a class=\"bvr\" href=\"https://bvr.design\"><img src=\"./bvr.png\"/></a>\n            </main>\n        )\n    }\n}\n\nconst List = ({ className, list }) => (\n    <section class={ className }>\n        <h1>{ list.name }</h1>\n        <table>\n            { list.items.map(item =>\n                Object.keys(item).map(key =>\n                    ListItem(item, key)\n                )\n            )}\n        </table>\n    </section>\n)\n\nconst ListItem = (item, name) => (\n    <tr>\n        <td>{ name }</td>\n        <td>{ item[name] }</td>\n    </tr>\n)\n\nconst Transition = (props, children) => {\n    const reverses = Object.keys(props || {}).filter(k => k == 'reverses').length != 0\n    const duration = `duration` in (props || {}) ? props.duration : 0.15\n    const delay = `delay` in (props || {}) ? props.delay : 0\n\n    const animatedChildren = children.map(child => {\n        child.data.style = {\n            transitionDuration: `${duration}s`,\n            transitionDelay: `${delay}s`\n        }\n\n        child.data.oncreate = element => {\n            element.className = 'transition-start'\n        }\n\n        child.data.oninsert = element => {\n            element.className = 'transition-end'\n        }\n\n        if (reverses) {\n            function handleTransitionEnd(event) {\n                if (event.target.parentNode) {\n                    event.target.parentNode.removeChild(event.target)\n                }\n                event.target.removeEventListener('transitionend', handleTransitionEnd, false)\n            }\n\n            child.data.onremove = element => {\n                element.className = 'transition-start'\n                element.addEventListener('transitionend', handleTransitionEnd, false)\n            }\n        }\n        return child\n    })\n\n    return animatedChildren\n}\n\napp({\n    state: {\n        aircraft: [],\n        selectedAircraft: null,\n    },\n\n    view: (state, actions) => {\n        return (\n            <Main state={ state } actions={ actions } electedAircraft={ state.selectedAircraft }/>\n        )\n    },\n\n    actions: {\n        loadIndex: (state, actions) => {\n            fetch('./aircraft/index.json')\n            .then(response => response.json())\n            .then(json =>\n                json.map(path =>\n                    fetch(`./aircraft/${path}.json`)\n                    .then(response => response.json())\n                    .then(json => actions.updateAircraft(json))\n                )\n            )\n        },\n\n        updateAircraft: (state, actions, json) => {\n            state.aircraft.push(json)\n            state.aircraft.sort((a, b) => {\n                const nameA = a.name.toLowerCase()\n                const nameB = b.name.toLowerCase()\n                if (nameA < nameB) {\n                    return -1\n                }\n                if (nameA > nameB) {\n                    return 1\n                }\n                return 0\n            })\n            return { aircraft : state.aircraft }\n        },\n\n        chooseAircraft: (state, actions, choice) => {\n            const aircraft = choice !== undefined ? state.aircraft.filter( value => value.name == choice )[0] : null\n            return { selectedAircraft: aircraft }\n        }\n    },\n\n    events: {\n        loaded: (state, actions) => {\n            actions.loadIndex()\n        }\n    }\n})"],"names":["h","tag","data","node","stack","children","i","arguments","length","Array","isArray","pop","app","state","actions","events","mixins","view","root","document","body","element","locked","loaded","mixin","emit","keys","map","key","concat","merge","hydrate","querySelector","repaint","render","tagName","call","childNodes","patch","initialize","namespace","lastName","action","name","result","then","cb","a","b","obj","getKey","createElement","isSVG","createTextNode","createElementNS","appendChild","setElementData","value","oldValue","style","_","setAttribute","removeAttribute","updateElementData","oldData","onupdate","removeElement","parent","onremove","removeChild","oldNode","lastElement","insertBefore","len","oldLen","reusableChildren","oldElements","newKeys","oldElement","oldChild","oldKey","j","newChild","newKey","reusableChild","reusableNode","nodeValue","replaceChild","index","fetch","bind","url","options","Promise","resolve","reject","request","XMLHttpRequest","open","method","headers","setRequestHeader","withCredentials","credentials","onload","response","onerror","send","all","header","getAllResponseHeaders","replace","m","push","toLowerCase","status","statusText","responseURL","responseText","JSON","parse","Blob","n","Selection","aircraft","chooseAircraft","CloseButton","Main","selectedAircraft","image","procedures","systems","item","List","className","list","items","Object","ListItem","Transition","props","reverses","filter","k","duration","delay","animatedChildren","child","oncreate","oninsert","handleTransitionEnd","event","target","parentNode","removeEventListener","addEventListener","json","path","updateAircraft","sort","nameA","nameB","choice","undefined","loadIndex"],"mappings":"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"}